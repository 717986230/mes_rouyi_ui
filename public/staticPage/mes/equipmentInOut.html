<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>炼油装置收付视图</title>

    <link rel="stylesheet" href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>

<body>
    <div class="container-fluid text-center">
        <div class="row p-2 me-2" tag="查询参数设置">
            <div class="col-3">
                <div class="d-flex">
                    <label class="p-2 m-2">时间：</label>
                    <input class="m-2" type="date" id="dayFrom" date="2023/9/13">
                </div>
            </div>
            <div class="col-3">
                <div class="d-flex">
                    <label class="text-nowrap p-2 m-2">选班：</label>
                    <select class="form-select m-2" aria-label="default select">
                        <option value="1" selected>夜班|20:00:00-08:00:00</option>
                        <option value="2">白班|08:00:00-20:00:00</option>
                    </select>
                </div>
            </div>
            <div class="col-3">
                <div class="d-flex">
                    <label class="text-nowrap p-2 m-2">装置：</label>
                    <select class="form-select m-2" aria-label="select">
                        <option selected>1#催化：</option>
                        <option value="1">1#催化</option>
                        <option value="2">2#催化</option>
                        <option value="3">3#催化</option>
                    </select>
                </div>
            </div>

            <div class="col-2">
                <button type="button" class="btn btn-outline-success text-success border p-2"><i
                        class=" bi bi-search p-2 m-3"></i>
                    查询</button>
            </div>
        </div>
        <div class="row p-1" tag="按钮操作">
            <div class="col">
                <div class="d-flex">
                    <button type="button" class="btn btn-outline-primary text-success border m-2 p-2 text-nowrap">
                        <i class="bi bi-gear"></i> 设置</button>
                    <button type="button" class="btn btn-outline-success text-info border m-2 p-2 text-nowarp"
                        data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="bi bi-plus-lg"></i> 新建</button>
                    <button type="button" class="btn btn-outline-warning text-danger text-nowrap border m-2 p-2"><i
                            class="bi bi-trash"></i> 删除</button>
                    <button type="button" class="btn btn-outline-warning text-danger text-nowrap border m-2 p-2"><i
                            class="bi bi-terminal"></i> 关闭</button>
                    <button type="button" class="btn btn-outline-success text-success border m-2 p-2"><i
                            class="bi bi-save"></i>
                        保存</button>
                </div>
            </div>

            <div class="col-1 p-3">
                <button class="btn btn-outline-secondary"
                    style="width: 35px; height: 35px; border-radius: 50%; font-size: 12px;">
                    <i class="bi bi-search"></i>
                </button>
            </div>
        </div>
        <hr>
        <div class="row p-1 border-1" tag="表格定义">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th></th>
                        <th>首付类型</th>
                        <th>付方节点名称</th>
                        <th>收访节点名称</th>
                        <th>付方开始时间</th>
                        <th>付方结束时间</th>
                        <th>创建人</th>
                        <th>创建时间</th>
                        <th>关闭人</th>
                        <th>关闭时间</th>
                    </tr>
                </thead>
                <tbody id="meteringPointTable">
                </tbody>
            </table>
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-end p-2">
                    <label class="m-2 p-2">共 5 条</label>
                    <select class="m-2">
                        <option selected>10条/页</option>
                        <option value="1">20条/页</option>
                        <option value="2">30条/页</option>
                        <option value="3">50条/页</option>
                    </select>

                    <div class="d-flex m-2">
                        <li class="page-item disabled">
                            <a class="page-link">
                                < </a>
                        </li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#"> > </a>
                        </li>
                    </div>
                    <label class="p-2">前往</label>
                    <input class="text-center" type="text" value="1" style="width: 40px;">
                    <label class="p-2">页</label>
                </ul>
            </nav>
        </div>

        <!-- 弹窗内容 -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content" style="text-align: right;">
                    <div class="modal-header">
                        <h5 class="modal-title text-nowrap">装置收付信息录入</h5>
                        <button type="button" class="btn-close form-control" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row text-right m-2">
                            <div class="col">
                                <label>操作类型:</label>
                            </div>
                            <div class="col">
                                <select class="form-select" aria-label="select">
                                    <option selected>1#催化：</option>
                                    <option value="1">1#催化</option>
                                    <option value="2">2#催化</option>
                                    <option value="3">3#催化</option>
                                </select>
                            </div>
                            <div class="col">
                                <input type="checkbox" class="form-check-input text-nowrap">
                            </div>
                            <div class="col" style="text-align: left;">
                                <label>使用拓朴结构</label>
                            </div>
                        </div>
                        <div class="row m-2">
                            <div class="col">
                                本方节点：
                            </div>
                            <div class="col text-rigth">
                                <select class="form-select" aria-label="select">
                                    <option value="0" selected>装置1</option>
                                    <option value="1">装置1</option>
                                    <option value="2">装置2</option>
                                    <option value="3">装置3</option>
                                </select>
                            </div>
                            <div class="col">
                                对方节点：
                            </div>
                            <div class="col text-rigth">
                                <select class="form-select" aria-label="select">
                                    <option value="0" selected>装置4</option>
                                    <option value="1">装置5</option>
                                    <option value="2">装置6</option>
                                    <option value="3">装置7</option>
                                </select>
                            </div>
                        </div>
                        <div class="row m-2">
                            <div class="col">
                                开始时间：
                            </div>
                            <div class="col">
                                <input type="datetime" value="2019-10-30 08:00:00">
                            </div>
                            <div class="col">
                                结束时间:
                            </div>
                            <div class="col">
                                <input type="datetime" value="2019-10-30 20:00:00">
                            </div>
                        </div>
                        <div class="row m-2">
                            <div class="col-6"></div>
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-5">
                                        <label for="">进出厂物料：</label>
                                    </div>
                                    <div class="col-4">
                                        <select class="form-select" aria-label="select">
                                            <option value="0" selected>物料1</option>
                                            <option value="1">物料5</option>
                                            <option value="2">物料6</option>
                                            <option value="3">物料7</option>
                                        </select>
                                    </div>
                                    <div class="col-3">
                                        <button>组分</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row m-2">
                            <div class="col">
                                创建时间：
                            </div>
                            <div class="col">
                                <input type="datetime" value="2019-10-30 08:00:00">
                            </div>
                            <div class="col">
                                关闭时间:
                            </div>
                            <div class="col">
                                <input type="datetime" value="2019-10-30 20:00:00">
                            </div>
                        </div>
                        <div class="row m-2">
                            <div class="col">
                                创建人：
                            </div>
                            <div class="col">
                                <select class="form-select" aria-label="select">
                                    <option value="0" selected>用户1</option>
                                    <option value="1">用户2</option>
                                    <option value="2">用户3</option>
                                    <option value="3">用户4</option>
                                </select>
                            </div>
                            <div class="col">
                                关闭人：
                            </div>
                            <div class="col">
                                <select class="form-select" aria-label="select">
                                    <option value="0" selected>用户1</option>
                                    <option value="1">用户2</option>
                                    <option value="2">用户3</option>
                                    <option value="3">用户4</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"><i
                                class="bi bi-x"></i>关闭</button>
                        <button type="button" class="btn btn-outline-primary"><i class="bi bi-save"></i>保存更改</button>
                    </div>
                </div>
            </div>
        </div>

        <script src="script/bootstrap.bundle.js"></script>

        <script>
            var jsonData = [
                {
                    "id": 1, "col1": "侧线收侧线", "col2": "二气分脱乙烷塔", "col3": "催化装置回收", "col4": "2019-10-30", "col5": "",
                    "col6": "屈湘林", "col7": "2019-10-31", "col8": "2019-10-31", "col9": "", "col10": ""
                },
                {
                    "id": 2, "col1": "侧线收侧线", "col2": "2#常减压装置", "col3": "一催化装置", "col4": "2019-10-30", "col5": "",
                    "col6": "屈湘林", "col7": "2019-10-31", "col8": "2019-10-31", "col9": "", "col10": ""
                },
                {
                    "id": 3, "col1": "罐收侧线1#", "col2": "一催化脱硫", "col3": "干气_消耗虚拟罐", "col4": "2019-10-30", "col5": "",
                    "col6": "屈湘林", "col7": "2019-10-31", "col8": "2019-10-31", "col9": "", "col10": ""
                },
                {
                    "id": 4, "col1": "罐收侧线2#", "col2": "一催化脱硫", "col3": "干气_消耗虚拟罐", "col4": "2019-10-30", "col5": "",
                    "col6": "屈湘林", "col7": "2019-10-31", "col8": "2019-10-31", "col9": "", "col10": ""
                },
                {
                    "id": 5, "col1": "罐收侧线3#", "col2": "一催化脱硫", "col3": "干气_消耗虚拟罐", "col4": "2019-10-30", "col5": "",
                    "col6": "屈湘林", "col7": "2019-10-31", "col8": "2019-10-31", "col9": "", "col10": ""
                },
            ]

            //使用 json数据 动态填充表格
            const tablebody = document.getElementById('meteringPointTable');
            tablebody.innerHTML = ``
            jsonData.forEach(item => {

                row = tablebody.insertRow(tablebody.rows.length);
                row.id = `${item.id}`
                cellid = row.insertCell(row.length);
                cellid.innerHTML = item.id;
                cell1 = row.insertCell(row.length);
                cell1.innerText = item.col1;
                cell2 = row.insertCell(row.length);
                cell2.innerText = item.col2;
                cell3 = row.insertCell(row.length);
                cell3.innerText = item.col3;
                cell4 = row.insertCell(row.length);
                cell4.innerText = item.col4;
                cell5 = row.insertCell(row.length);
                cell5.innerText = item.col5;
                cell6 = row.insertCell(row.length);
                cell6.innerText = item.col6;
                cell7 = row.insertCell(row.length);
                cell7.innerText = item.col7;
                cell8 = row.insertCell(row.length);
                cell8.innerText = item.col8;
                cell9 = row.insertCell(row.length);
                cell9.innerText = item.col9;
                cell10 = row.insertCell(row.length);
                cell10.innerText = item.col10;
                tablebody.appendChild(row);
            });

            // 按钮点击处理函数
            function handleButtonClick(button, id) {
                tb_container = document.getElementById(`expend_table_${id}`);
                if (button.innerText == '+') {
                    button.innerHTML = '-';

                    tb_container.style.display = "";
                }
                else {
                    button.innerText = '+';
                    tb_container.innerHTML = ``;
                    tb_container.style.display = "none";
                }
                item = jsonData.find(item => item.id === id);
                col10 = item.col10;
                if (typeof col10 === 'undefined') {
                    return;
                }
                tb_container.innerHTML = ``;
                const border = document.createElement('td');
                border.colSpan = '5';

                const table = document.createElement('table');
                table.className = 'table';

                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');
                headerRow.innerHTML = `<th></th><th>测点名称</th><th>原始值</th><th>校正值</th><th>数据状态</th>`;
                thead.appendChild(headerRow);

                table.appendChild(thead);
                const tbody = document.createElement('tbody');

                for (const rowData of col10) {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td></td><td>${rowData.col1}</td><td>${rowData.col2}</td>
                    <td>${rowData.col3}</td><td>${rowData.col4}</td>`;
                    tbody.appendChild(row);
                };
                table.appendChild(tbody);
                border.appendChild(table);
                tb_container.appendChild(border);
            }

            const datalen = document.getElementById('data_length');
            datalen.innerText = jsonData.length;

        </script>
</body>


</html>